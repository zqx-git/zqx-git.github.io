<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ysrK/9LS0v///////////////////////////////////////////////////////////////////////////4aGhv+Li4v///////////////////////////////////////////////////////////////////////////+lpaX/bm5u//z8/P//////////////////////////////////////////////////////////////////////xcXF/1tbW//w8PD//////////////////////////////////////////////////////////////////////9/f3/9VVVX/3d3d///////////////////////////////////////////////////////////////////////y8vL/XV1d/8LCwv///////////////////////////////////////////////////////////////////////f39/3Jycv+jo6P///////////////////////////////////////////////////////////////////////////+Pj4//g4OD////////////////////////////////////////////////////////////////////////////sLCw/2hoaP/5+fn//////////////////////////////////////////////////////////////////////87Ozv9aWlr/7u7u///////////////////////////////////////////////////////////////////////w8PD/ubm5//f39///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==" rel="shortcut icon" type="image/x-icon">
  <link rel="stylesheet" href="../../css/bass.css">
  <link rel="stylesheet" href="../../css/skill.css">
  <link rel="stylesheet" href="../../css/iconfont.css">
  <script src="https://cdn.bootcss.com/jquery/3.4.0/jquery.min.js"></script>
  <script src="../../js/bass.js"></script>
  <script src="../../js/template-web.js"></script>
  <title>技术</title>
</head>

<body>
  <div class="search">
    <h5 onclick="cancel()">技术文章</h5>
    <div>
      <span class="shaixuan" onclick="select()">筛 选 </span>
      <span class="jiaobiao" onclick="select()"></span>
      <button>搜 索</button>
      <span class="fenge">|</span>
      <input type="text" placeholder="请输入要搜索的内容">
      <span class="iconfont icon-sousuo"></span>
    </div>
    <div id="selectDialog" class="dialog hidden">
      <ul id="label">
        <!-- <li>HTML5</li>
        <li>CSS3</li>
        <li>JavasScript</li>
        <li>Vue</li>
        <li>Node.js</li>
        <li>ES6</li>
        <li>面试题</li>
        <li>Python</li> -->
      </ul>
      <button onclick="cancel()">取消</button>
      <button onclick="determine()">确定</button>
      <div></div>
    </div>
  </div>
  <ul class="wenzhang" id="article">
  </ul>
</body>
<script type=" text/template" id="tmp1">
  {{ each list v i }}
    <li onclick="djLabel(this,{{v.id}})">{{v.name}}</li>
  {{/each}}
</script>
<script type=" text/template" id="tmp2">
  {{ each list v i }}
  {{if v.subheading.length}}
    <li class="bigimg" onclick="djArticle({{v.pid}},{{v.id}})">
      <div class="articleInfo">
        <p><img src="{{v.userImg}}" alt=""><span>{{v.type}}</span><span>{{v.date}}</span></p>
      </div>
      <div class="imgs" style="background: url('{{v.articleImg}}') no-repeat center; background-size: cover;"></div>
      <div class="biaoti">
        <h3>{{v.mainTitle}}</h3>
        <p>{{v.subheading}}</p>
      </div>
    </li>
  {{else}}
    <li class="smallimg" onclick="djArticle({{v.pid}},{{v.id}})">
      <div class="articleInfo">
        <p><img src="{{v.userImg}}" alt=""><span>{{v.type}}</span><span>{{v.date}}</span></p>
      </div>
      <div class="biaoti">
        {{if v.mainTitle.length < 15}} 
          <h3 style="line-height: .45rem">{{v.mainTitle}}</h3>
        {{else}}
          <h3 style="line-height: .25rem">{{v.mainTitle}}</h3>
        {{/if}}
        <img src="{{v.articleImg}}" alt="">
      </div>
    </li>
  {{/if}}
  {{/each}}
</script>
<script type="text/javascript">
  let ArticleList = {
    list: [{
        pid: 8,
        id: 1,
        userImg: '../../img/色块.jpg',
        type: 'Python',
        date: '2019年12月10日',
        mainTitle: '标题长度，超x个字符转成不可名状的点点的点点的点点的点点哈哈哈点点哈哈哈哈哈哈哈',
        subheading: '震惊！这竟然是一行副标题？？？',
        articleImg: '../../img/lb-js.jpg'
      },
      {
        pid: 8,
        id: 2,
        userImg: '../../img/色块.jpg',
        type: 'Python',
        date: '2019年12月15日',
        mainTitle: '标题长度，超x个字符转成不可名状的点点的点点的点点的点点哈哈哈点点哈哈哈哈哈哈哈',
        subheading: '',
        articleImg: '../../img/lb-gs.jpg'
      },
      {
        pid: 3,
        id: 3,
        userImg: '../../img/色块.jpg',
        type: 'JavasScript',
        date: '2019年12月10日',
        mainTitle: '标题长度，超x个字符转成不可名状的点点的点点的点点的点点哈哈哈点点哈哈哈哈哈哈哈',
        subheading: '这是一行副标题',
        articleImg: '../../img/色块.jpg'
      },
      {
        pid: 3,
        id: 4,
        userImg: '../../img/色块.jpg',
        type: 'JavasScript',
        date: '2019年12月10日',
        mainTitle: '标题长度，超过十十五个字符的de情况，最多两行，其他的字符会变成不可名状的点点',
        subheading: '',
        articleImg: '../../img/色块.jpg'
      },
    ]
  }
  $('#article').html(template('tmp2', ArticleList))

  let selectID = []
  // 点击了返回
  function cancel() {
    console.log('点击了返回')
  }
  // 点击了筛选
  function select(e) {
    console.log('点击筛选')
    selectID = []
    // 筛选显示的标签
    let labels = {
      // 标签数据
      list: [{
          id: 1,
          name: 'HTML5'
        },
        {
          id: 2,
          name: 'CSS3'
        },
        {
          id: 3,
          name: 'JavasScript'
        },
        {
          id: 4,
          name: 'ES6'
        },
        {
          id: 5,
          name: 'Vue'
        },
        {
          id: 6,
          name: 'Node.js'
        },
        {
          id: 7,
          name: '面试题'
        },
        {
          id: 8,
          name: 'Python'
        }
      ]
    }
    $('#label').html(template('tmp1', labels))
    $('.shaixuan').toggleClass('blue')
    $('.jiaobiao').toggleClass('jiaobiaoUp')
    $("#selectDialog").toggleClass('hidden')
  }
  // 点击了某一标签
  function djLabel(e, id) {
    // 判断selectID中有没有这个id，有的话移除，没有的话添加
    selectID.indexOf(id) < 0 ? selectID.push(id) : selectID.splice(selectID.indexOf(id), 1)
    $(e).toggleClass('selectLabel')
  }
  // 取消筛选
  function cancel() {
    $('.shaixuan').toggleClass('blue')
    $('.jiaobiao').toggleClass('jiaobiaoUp')
    $("#selectDialog").toggleClass('hidden')
  }
  // 确认筛选
  function determine() {
    $('.shaixuan').toggleClass('blue')
    $('.jiaobiao').toggleClass('jiaobiaoUp')
    $("#selectDialog").toggleClass('hidden')
    console.log('已筛选，筛选中的id是' + selectID)
  }
  // 点击某篇文章
  function djArticle(pid, id) {
    console.log(pid)
    console.log(id)
    window.location.href = `./article.html?pid=${pid}&id=${id}`
  }
</script>

</html>